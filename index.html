<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LifePort</title>
    
    <!-- React & ReactDOM (CDN) -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
    
    <!-- Babel (JSXë¥¼ ë¸Œë¼ìš°ì €ê°€ ì´í•´í•˜ë„ë¡ ë³€í™˜) -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Tailwind CSS (ìŠ¤íƒ€ì¼ë§) -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- í°íŠ¸ ì„¤ì • -->
    <style>
        @import url('https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css');
        body { font-family: 'Pretendard', sans-serif; }
        .hide-scrollbar::-webkit-scrollbar { display: none; }
        .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .animate-fade-in { animation: fadeIn 0.5s ease-out forwards; }
        
        /* ìŠ¬ë¼ì´ë” ì¸(í•¸ë“¤) ìŠ¤íƒ€ì¼ ì»¤ìŠ¤í…€ */
        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none;
            height: 24px;
            width: 24px;
            border-radius: 50%;
            background: #ffffff;
            border: 2px solid #3182F6;
            box-shadow: 0 2px 6px rgba(49, 130, 246, 0.4);
            margin-top: -8px; /* íŠ¸ë™ ì¤‘ì•™ ì •ë ¬ */
        }
        input[type=range]::-webkit-slider-runnable-track {
            width: 100%;
            height: 8px;
            border-radius: 4px;
        }
    </style>
</head>
<body class="bg-[#F2F4F6]">
    <div id="root"></div>

    <script type="text/babel">
        // --- ì•„ì´ì½˜ ì»´í¬ë„ŒíŠ¸ ---
        const IconBase = ({ size = 24, color = "currentColor", children, ...props }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke={color} strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" {...props}>
                {children}
            </svg>
        );

        const User = (props) => <IconBase {...props}><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></IconBase>;
        const CheckCircle = (props) => <IconBase {...props}><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></IconBase>;
        const AlertTriangle = (props) => <IconBase {...props}><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/></IconBase>;
        const Shield = (props) => <IconBase {...props}><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></IconBase>;
        const RefreshCw = (props) => <IconBase {...props}><polyline points="23 4 23 10 17 10"/><polyline points="1 20 1 14 7 14"/><path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"/></IconBase>;
        const TrendingUp = (props) => <IconBase {...props}><polyline points="23 6 13.5 15.5 8.5 10.5 1 18"/><polyline points="17 6 23 6 23 12"/></IconBase>;
        const Activity = (props) => <IconBase {...props}><polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/></IconBase>;
        const CreditCard = (props) => <IconBase {...props}><rect x="1" y="4" width="22" height="16" rx="2" ry="2"/><line x1="1" y1="10" x2="23" y2="10"/></IconBase>;
        const Landmark = (props) => <IconBase {...props}><line x1="3" y1="22" x2="21" y2="22"/><line x1="6" y1="18" x2="6" y2="11"/><line x1="10" y1="18" x2="10" y2="11"/><line x1="14" y1="18" x2="14" y2="11"/><line x1="18" y1="18" x2="18" y2="11"/><polygon points="12 2 20 7 4 7"/></IconBase>;

        // --- ë©”ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ ---
        const LifePortSimulator = () => {
            const [screen, setScreen] = React.useState('intro');
            const [loadingStep, setLoadingStep] = React.useState(0);
            const [profile, setProfile] = React.useState(null);
            const [simulationResult, setSimulationResult] = React.useState(null);

            const [lifestyle, setLifestyle] = React.useState('standard'); 
            const [activeRisks, setActiveRisks] = React.useState({}); 
            const [savings, setSavings] = React.useState(0); 

            // ë°ì´í„° ì •ì˜
            const jobs = [
                { title: 'ëŒ€ê¸°ì—… ëŒ€ë¦¬', minIncome: 350, maxIncome: 550, style: 'stable' },
                { title: 'í”„ë¦¬ëœì„œ ê°œë°œì', minIncome: 300, maxIncome: 800, style: 'volatile' },
                { title: '9ê¸‰ ê³µë¬´ì›', minIncome: 200, maxIncome: 280, style: 'stable' },
                { title: 'ìŠ¤íƒ€íŠ¸ì—… ëŒ€í‘œ', minIncome: 200, maxIncome: 1200, style: 'high-risk' },
                { title: 'í¸ì˜ì  ì ì£¼', minIncome: 250, maxIncome: 450, style: 'business' },
                { title: 'ì „ë¬¸ì§ (ì•½ì‚¬)', minIncome: 600, maxIncome: 1000, style: 'professional' },
                { title: 'ì¤‘ì†Œê¸°ì—… ì‚¬ì›', minIncome: 230, maxIncome: 340, style: 'average' },
            ];

            const spendingHabits = [
                { type: 'ì§ í…Œí¬ ê³ ìˆ˜', ratio: 0.35, desc: 'ì €ì¶•ë¥  65%' },
                { type: 'í•©ë¦¬ì  ì†Œë¹„', ratio: 0.55, desc: 'ì €ì¶•ë¥  45%' },
                { type: 'ìšœë¡œ(YOLO)ì¡±', ratio: 0.95, desc: 'ì €ì¶•ë¥  5%' },
                { type: 'ê¸°ë¶„íŒŒ', ratio: 0.75, desc: 'ì €ì¶•ë¥  25%' },
                { type: 'ë¯¸ë‹ˆë©€ë¦¬ìŠ¤íŠ¸', ratio: 0.45, desc: 'ì €ì¶•ë¥  55%' },
            ];

            const riskScenarios = {
                20: [
                    { id: 'marriage', title: 'ğŸ’ ê²°í˜¼ ë° ë…ë¦½ ìê¸ˆ', desc: 'ì£¼ê±° ë§ˆë ¨ ë° í˜¼ìˆ˜ ë¹„ìš©', loss: 8000, prob: '70%' }, 
                    { id: 'car', title: 'ğŸš— ì°¨ëŸ‰ êµ¬ë§¤ ë¹„ìš©', desc: 'í• ë¶€ê¸ˆ ë° ìœ ì§€ë³´ìˆ˜ë¹„', loss: 3000, prob: '60%' } 
                ],
                30: [
                    { id: 'housing', title: 'ğŸ  ì£¼íƒ ëŒ€ì¶œ ì´ì ìƒìŠ¹', desc: 'ëŒ€ì¶œ ì›ë¦¬ê¸ˆ ìƒí™˜ ë¶€ë‹´', loss: 10000, prob: '50%' }, 
                    { id: 'child', title: 'ğŸ‘¶ ìœ¡ì•„ íœ´ì§/ì†Œë“ ê°ì†Œ', desc: 'ê²½ë ¥ ë‹¨ì ˆë¡œ ì¸í•œ ì†ì‹¤', loss: 4000, prob: '40%' }
                ],
                40: [
                    { id: 'education', title: 'ğŸ“ ìë…€ êµìœ¡ë¹„ ì§€ì¶œ', desc: 'ëŒ€í•™ ì§„í•™ê¹Œì§€ ëˆ„ì  ë¹„ìš©', loss: 12000, prob: '80%' }, 
                    { id: 'medical', title: 'ğŸ¥ ê³ ì•¡ ì˜ë£Œë¹„ ë°œìƒ', desc: 'ê°€ì¡± ìˆ˜ìˆ  ë° ì…ì›ë¹„', loss: 5000, prob: '24%' }
                ],
                50: [
                    { id: 'business_fail', title: 'ğŸ“‰ íˆ¬ì ë° ì‚¬ì—… ì†ì‹¤', desc: 'ë…¸í›„ ìê¸ˆ ì†ì‹¤', loss: 15000, prob: '30%' }, 
                    { id: 'job_loss', title: 'ğŸ’¼ ì¡°ê¸° í‡´ì§ ë° ì‹¤ì§', desc: 'ì˜ˆìƒë³´ë‹¤ ë¹ ë¥¸ ì†Œë“ ì¤‘ë‹¨', loss: 5000, prob: '15%' }
                ],
                60: [
                    { id: 'medical_major', title: 'ğŸ¥ ë…¸í›„ ì˜ë£Œë¹„ í­íƒ„', desc: 'ì¥ê¸° ìš”ì–‘ ë° ê°„ë³‘ë¹„', loss: 8000, prob: '35%' },
                    { id: 'scam', title: 'ğŸ’¸ ê¸ˆìœµ ì‚¬ê¸°/ì†ì‹¤', desc: 'ìì‚° ê´€ë¦¬ ì‹¤íŒ¨', loss: 10000, prob: '15%' }
                ]
            };

            const rand = (min, max) => Math.floor(Math.random() * (max - min + 1)) + min;
            const formatMoney = (amount) => amount >= 10000 ? (amount / 10000).toFixed(1).replace('.0', '') + 'ì–µ' : amount.toLocaleString() + 'ë§Œì›';

            const generateProfile = () => {
                const age = rand(26, 45); 
                const job = jobs[rand(0, jobs.length - 1)];
                const habit = spendingHabits[rand(0, spendingHabits.length - 1)];
                
                let monthlyIncome = rand(job.minIncome, job.maxIncome);
                
                // [ìˆ˜ì •] 35ì„¸ ì´ìƒ ì†Œë“ ë³´ì •: ì§ì—… ì•ˆì •ì„±ì— ë”°ë¼ ì°¨ë“± ì ìš©
                // ë¶ˆì•ˆì • ì§êµ°(volatile, high-risk)ì€ ë‚˜ì´ ë“¤ì–´ë„ ì†Œë“ ìƒìŠ¹í­ì„ ì œí•œí•¨
                if (age > 35 && job.style !== 'beginner') {
                    if (job.style === 'volatile' || job.style === 'high-risk') {
                        monthlyIncome += rand(20, 80); // í”„ë¦¬ëœì„œ/ìŠ¤íƒ€íŠ¸ì—…ì€ ìƒìŠ¹í­ ì‘ê²Œ
                    } else {
                        monthlyIncome += rand(50, 150); // ëŒ€ê¸°ì—…/ì „ë¬¸ì§ì€ ìƒìŠ¹í­ í¬ê²Œ
                    }
                }
                
                const baseMonthlyExpense = Math.floor(monthlyIncome * habit.ratio);
                const yearsWorked = Math.max(0, age - 26);
                const annualSaving = (monthlyIncome - baseMonthlyExpense) * 12;
                
                // [ìˆ˜ì •] ìì‚° ì¶•ì  ì•ˆì •ì„± ê³„ìˆ˜ (Stability Factor) ë„ì…
                // í”„ë¦¬ëœì„œ(volatile)ë‚˜ ì‚¬ì—…(high-risk)ì€ ê³µë°±ê¸°ê°€ ìˆì–´ ìì‚° ì¶•ì  íš¨ìœ¨ì´ ë‚®ìŒ (0.7 ~ 0.8ë°°)
                let stabilityFactor = 1.0;
                if (job.style === 'volatile') stabilityFactor = 0.75; // í”„ë¦¬ëœì„œ: ê³µë°±ê¸° ë°˜ì˜
                if (job.style === 'high-risk') stabilityFactor = 0.7; // ì‚¬ì—…: íˆ¬ìë¹„ìš© ë°˜ì˜
                if (job.style === 'professional') stabilityFactor = 1.1; // ì „ë¬¸ì§: ë³´ë„ˆìŠ¤ ë“± ë°˜ì˜

                // ê¸°ì¡´ ë¡œì§ì— stabilityFactor ê³±í•˜ê¸°
                let totalAssets = Math.floor(annualSaving * yearsWorked * stabilityFactor * rand(4, 7) / 10) + rand(100, 1000); 
                
                let debt = Math.floor(totalAssets * (rand(10, 50) / 100));
                let netAssets = Math.floor(totalAssets - debt);

                let ageKey = Math.floor(age / 10) * 10;
                if (ageKey > 60) ageKey = 60;
                if (ageKey < 20) ageKey = 20;
                const assignedRisks = riskScenarios[ageKey] || riskScenarios[40];

                return {
                    age, job: job.title, monthlyIncome, baseMonthlyExpense,
                    totalAssets: netAssets, totalDebt: debt, habit: habit.type,
                    risks: assignedRisks, retirementAge: job.style === 'professional' ? 68 : 60,
                    investmentReturn: rand(10, 35) / 10 
                };
            };

            const runSimulation = () => {
                if (!profile) return;
                let currentAssets = profile.totalAssets;
                let isBankrupt = false;
                let bankruptAge = 100;
                
                let lifestyleMultiplier = 1.0;
                if (lifestyle === 'basic') lifestyleMultiplier = 0.7;
                if (lifestyle === 'rich') lifestyleMultiplier = 1.4;

                let riskCost = 0;
                profile.risks.forEach(r => { if (activeRisks[r.id]) riskCost += r.loss; });
                currentAssets -= riskCost; 

                for (let age = profile.age; age <= 100; age++) {
                    let annualIncome = (age <= profile.retirementAge) 
                        ? profile.monthlyIncome * 12 
                        : Math.min(profile.monthlyIncome * 0.4, 180) * 12;

                    let monthlyExpense = (profile.baseMonthlyExpense * lifestyleMultiplier) - savings;
                    
                    let minLivingCost = 85 + (age - 30) * 2.0; 
                    if (age > profile.retirementAge) minLivingCost = 85 + (profile.retirementAge - 30) * 2.0 + (age - profile.retirementAge) * 1.0;
                    if (monthlyExpense < minLivingCost) monthlyExpense = minLivingCost;

                    let annualExpense = monthlyExpense * 12 * Math.pow(1.03, age - profile.age);
                    
                    let interestOrReturn = currentAssets >= 0 ? currentAssets * (profile.investmentReturn / 100) : currentAssets * 0.06;
                    let netChange = annualIncome - annualExpense + interestOrReturn;
                    currentAssets += netChange;

                    if (currentAssets < 0) {
                        if (age > profile.retirementAge || netChange < 0) {
                           isBankrupt = true; bankruptAge = age; break;
                        }
                    }
                }

                const currentExpense = (profile.baseMonthlyExpense * lifestyleMultiplier) - savings;
                const savingRate = Math.max(0, Math.round(((profile.monthlyIncome - currentExpense) / profile.monthlyIncome) * 100));
                const effectiveDebt = profile.totalDebt + (riskCost > 0 ? riskCost : 0);
                const monthlyInterest = (effectiveDebt * 0.05) / 12;
                const dsr = Math.round((monthlyInterest / profile.monthlyIncome) * 100);
                const liquidAssets = Math.max(0, currentAssets * 0.2);
                const emergencyFundMonths = currentExpense > 0 ? (liquidAssets / currentExpense).toFixed(1) : 0;

                setSimulationResult({ isBankrupt, bankruptAge, savingRate, dsr, emergencyFundMonths });
            };

            React.useEffect(() => { if (profile) runSimulation(); }, [profile, lifestyle, activeRisks, savings]);

            const handleStart = () => {
                setProfile(null); setSimulationResult(null); setActiveRisks({}); setSavings(0); setLifestyle('standard');
                setScreen('loading'); setLoadingStep(0);
                const steps = [
                    () => setLoadingStep(1), () => setLoadingStep(2), () => setLoadingStep(3),
                    () => { setLoadingStep(4); setProfile(generateProfile()); },
                    () => setScreen('result')
                ];
                let delay = 0;
                steps.forEach(step => { delay += 800; setTimeout(step, delay); });
            };

            const toggleRisk = (id) => setActiveRisks(prev => ({ ...prev, [id]: !prev[id] }));

            const getStatusColor = (age) => {
                if (age >= 100) return { text: '#29CC6A', bg: '#E6FCF0', label: 'ì•ˆì „ ìƒíƒœ' }; 
                if (age >= 80) return { text: '#3182F6', bg: '#E8F3FF', label: 'ë³´í†µ ìƒíƒœ' }; 
                if (age >= 70) return { text: '#FF8D4D', bg: '#FFF4E6', label: 'ì£¼ì˜ í•„ìš”' }; 
                return { text: '#E94658', bg: '#FFF0F1', label: 'ìœ„í—˜ ê²½ê³ ' }; 
            };

            const maxSavings = 200;

            // --- ë Œë”ë§ UI ---
            return (
                <div className="min-h-screen flex justify-center items-center font-sans overflow-hidden bg-[#F2F4F6] text-[#191F28]">
                    <div className="w-full max-w-[400px] h-[100vh] max-h-[850px] bg-white relative shadow-xl flex flex-col overflow-y-auto hide-scrollbar">
                        
                        {/* INTRO */}
                        {screen === 'intro' && (
                            <div className="flex-1 flex flex-col justify-center text-center p-6 animate-fade-in">
                                <div className="text-[60px] mb-8 animate-bounce">ğŸª™â³</div>
                                <h1 className="text-[28px] font-extrabold leading-snug mb-3">ë‹¹ì‹ ì˜ ëˆì€<br />ì–¸ì œ ì£½ì„ê¹Œìš”?</h1>
                                <p className="text-[#8B95A1] text-base mb-10">ì¹´ë“œ ë‚´ì—­ê³¼ ìœ„í—˜ í™•ë¥ ì„ ë¶„ì„í•´<br />ê¸ˆìœµ ìˆ˜ëª…ì„ ì˜ˆì¸¡í•´ ë“œë¦½ë‹ˆë‹¤.</p>
                                <button onClick={handleStart} className="w-full py-[18px] rounded-[14px] bg-[#3182F6] text-white text-[17px] font-bold shadow-sm active:scale-98 transition-transform">ë‚´ ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸°</button>
                            </div>
                        )}

                        {/* LOADING */}
                        {screen === 'loading' && (
                            <div className="flex-1 flex flex-col justify-center items-center bg-white/95 p-6 animate-fade-in">
                                <div className="w-[50px] h-[50px] border-[5px] border-[#eee] border-t-[#3182F6] rounded-full animate-spin mb-8"></div>
                                <div className="text-[18px] font-bold mb-2">ì„œë²„ ì—°ê²° ì¤‘...</div>
                                <div className="text-sm text-[#8B95A1] mb-8">ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”</div>
                                <div className="w-[85%] space-y-3 text-left">
                                    <LoadingItem step={1} current={loadingStep} icon={<Landmark size={16}/>} text="ì€í–‰/ê³„ì¢Œ ì”ì•¡ ì¡°íšŒ" />
                                    <LoadingItem step={2} current={loadingStep} icon={<CreditCard size={16}/>} text="ì¹´ë“œ 3ë…„ì¹˜ ì†Œë¹„ íŒ¨í„´ ë¶„ì„" />
                                    <LoadingItem step={3} current={loadingStep} icon={<Activity size={16}/>} text="ê±´ê°•ê²€ì§„ ì˜ë£Œë¹„ ì˜ˆì¸¡" />
                                    <LoadingItem step={4} current={loadingStep} icon={<TrendingUp size={16}/>} text="ë¦¬ìŠ¤í¬ ëª¨ë¸ë§ ì¤‘..." />
                                </div>
                            </div>
                        )}

                        {/* RESULT */}
                        {screen === 'result' && profile && simulationResult && (
                            <div className="animate-fade-in pb-10">
                                <div className="sticky top-0 bg-white/95 backdrop-blur-sm z-50 pt-5 pb-4 border-b border-[#eee] shadow-[0_4px_10px_rgba(0,0,0,0.03)]">
                                    <div className="px-6 text-center mb-5">
                                        <div className="flex items-center justify-center gap-2 mb-2">
                                            <span className="inline-flex items-center gap-1 px-3 py-1 bg-gray-100 text-gray-600 rounded-full text-[12px] font-bold">
                                                <User size={12} /> íšŒì›ë‹˜ ({profile.age}ì„¸) Â· {profile.job}
                                            </span>
                                        </div>
                                        <span className="inline-block px-3 py-1.5 rounded-full text-[13px] font-bold mb-3" style={{ backgroundColor: getStatusColor(simulationResult.bankruptAge).bg, color: getStatusColor(simulationResult.bankruptAge).text }}>
                                            {getStatusColor(simulationResult.bankruptAge).label}
                                        </span>
                                        <div className="text-[26px] font-extrabold leading-[1.3]">
                                            ë‹¹ì‹ ì˜ ëˆì€<br />
                                            <span style={{ color: getStatusColor(simulationResult.bankruptAge).text }}>
                                                {simulationResult.isBankrupt ? `${simulationResult.bankruptAge}ì„¸` : '100ì„¸+'}
                                            </span>ì— ì‚¬ë§í•©ë‹ˆë‹¤.
                                        </div>
                                    </div>

                                    <div className="flex justify-center gap-2 px-6 mb-5">
                                        <TabButton active={lifestyle === 'basic'} onClick={() => setLifestyle('basic')}>ê¸°ë³¸ ìƒí™œ</TabButton>
                                        <TabButton active={lifestyle === 'standard'} onClick={() => setLifestyle('standard')}>ë³´í†µ ìƒí™œ</TabButton>
                                        <TabButton active={lifestyle === 'rich'} onClick={() => setLifestyle('rich')}>ì—¬ìœ  ìƒí™œ</TabButton>
                                    </div>

                                    <div className="px-6 mb-2">
                                        <div className="flex justify-between text-[14px] font-semibold text-[#555] mb-2">
                                            <span>ğŸ’¸ ëˆì˜ ìˆ˜ëª…</span>
                                            <span>{simulationResult.isBankrupt ? `${simulationResult.bankruptAge}ì„¸` : '100ì„¸+'}</span>
                                        </div>
                                        <div className="w-full h-4 bg-[#eee] rounded-full overflow-hidden relative">
                                            <div className="h-full transition-all duration-500 ease-out" style={{ width: `${Math.min(100, simulationResult.bankruptAge)}%`, backgroundColor: getStatusColor(simulationResult.bankruptAge).text }}></div>
                                        </div>
                                        <p className="text-center text-[12px] text-[#888] mt-1">â–² ê¸°ëŒ€ìˆ˜ëª… 100ì„¸ ê¸°ì¤€</p>
                                    </div>

                                    <div className="grid grid-cols-3 gap-2 px-6 mt-4">
                                        <DiagItem label="ì €ì¶•ë¥ " value={`${simulationResult.savingRate}%`} status={simulationResult.savingRate > 30 ? "ì–‘í˜¸" : "ë¶€ì¡±"} color={simulationResult.savingRate > 30 ? "#29CC6A" : "#FF8D4D"} />
                                        <DiagItem label="DSR(ë¶€ì±„)" value={`${simulationResult.dsr}%`} status={simulationResult.dsr < 40 ? "ì–‘í˜¸" : "ìœ„í—˜"} color={simulationResult.dsr < 40 ? "#29CC6A" : "#E94658"} />
                                        <DiagItem label="ë¹„ìƒê¸ˆ ì—¬ë ¥" value={`${simulationResult.emergencyFundMonths}ê°œì›”`} status={simulationResult.emergencyFundMonths > 3 ? "ì–‘í˜¸" : "ìœ„í—˜"} color={simulationResult.emergencyFundMonths > 3 ? "#29CC6A" : "#E94658"} />
                                    </div>
                                </div>

                                <div className="border-t-[8px] border-[#F2F4F6] p-6 mt-5">
                                    <div className="flex items-center text-[18px] font-extrabold mb-4">
                                        <AlertTriangle className="text-[#FF8D4D] mr-2" size={20} />
                                        <span>{Math.floor(profile.age/10)*10}ëŒ€ ë¼ì´í”„ ë¦¬ìŠ¤í¬</span>
                                    </div>
                                    <p className="text-[13px] text-[#666] mb-5">í•´ë‹¹ ì—°ë ¹ëŒ€ì— ë°œìƒí•  ìˆ˜ ìˆëŠ” ì£¼ìš” ì§€ì¶œì…ë‹ˆë‹¤.<br />ìŠ¤ìœ„ì¹˜ë¥¼ ì¼œì„œ ë‚´ ëˆì˜ ìˆ˜ëª… ë³€í™”ë¥¼ í™•ì¸í•˜ì„¸ìš”.</p>
                                    {profile.risks.map((risk) => (
                                        <div key={risk.id} className="bg-white border border-[#eee] rounded-[16px] p-5 mb-4 shadow-[0_4px_12px_rgba(0,0,0,0.03)]">
                                            <div className="inline-block bg-[#f5f5f5] text-[#8B95A1] text-[12px] px-2 py-1 rounded-md mb-2">âš ï¸ ìœ„í—˜ë„ {risk.prob}</div>
                                            <div className="flex justify-between items-center mb-2">
                                                <span className="text-[16px] font-bold">{risk.title}</span>
                                                <label className="relative inline-flex items-center cursor-pointer">
                                                    <input type="checkbox" className="sr-only peer" checked={!!activeRisks[risk.id]} onChange={() => toggleRisk(risk.id)} />
                                                    <div className="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-[#FF8D4D]"></div>
                                                </label>
                                            </div>
                                            <div className="text-[13px] text-[#555] flex justify-between">
                                                <span>{risk.desc}</span>
                                                <b className="text-[#E94658]">-{formatMoney(risk.loss)}</b>
                                            </div>
                                        </div>
                                    ))}
                                </div>

                                <div className="border-t-[8px] border-[#F2F4F6] p-6 bg-[#F9FAFB]">
                                    <div className="flex items-center text-[18px] font-extrabold mb-4 text-[#191F28]">
                                        <Shield className="text-[#3182F6] mr-2" size={20} />
                                        <span>ì†”ë£¨ì…˜ ì‹œë®¬ë ˆì´í„°</span>
                                    </div>
                                    <div className="bg-white rounded-[16px] p-5 border border-[#eee] shadow-[0_4px_12px_rgba(0,0,0,0.03)]">
                                        <div className="text-[16px] font-bold text-[#3182F6] mb-1">â˜•ï¸ ì›” ì§€ì¶œì„ ì¤„ì¸ë‹¤ë©´?</div>
                                        <div className="py-4 relative">
                                            <input 
                                                type="range" 
                                                min="0" 
                                                max={maxSavings} 
                                                step="5" 
                                                value={savings} 
                                                onChange={(e) => setSavings(Number(e.target.value))} 
                                                className="w-full h-2 rounded-lg appearance-none cursor-pointer"
                                                style={{
                                                    background: `linear-gradient(to right, #3182F6 0%, #3182F6 ${(savings / maxSavings) * 100}%, #E5E8EB ${(savings / maxSavings) * 100}%, #E5E8EB 100%)`
                                                }}
                                            />
                                        </div>
                                        <div className="flex justify-between items-center mt-1">
                                            <span className="text-[14px] text-[#555]">ì €ì¶•ì•¡</span>
                                            <span className="text-[20px] font-extrabold text-[#3182F6]">{savings > 0 ? `+${savings}` : '0'}ë§Œì›</span>
                                        </div>
                                    </div>
                                    <div className="mt-5 text-center text-[14px] text-[#555]">
                                        <span dangerouslySetInnerHTML={{ __html: simulationResult.bankruptAge >= 95 ? "í›Œë¥­í•©ë‹ˆë‹¤! <strong style='color:#29CC6A'>ì•ˆì •ì ì¸ ë…¸í›„</strong>ê°€ ì˜ˆìƒë©ë‹ˆë‹¤." : `ì§€ê¸ˆ ìƒíƒœëŠ” <strong style='color:${getStatusColor(simulationResult.bankruptAge).text}'>ì£¼ì˜</strong>ê°€ í•„ìš”í•©ë‹ˆë‹¤.` }}></span>
                                    </div>
                                    <button onClick={handleStart} className="w-full py-[18px] mt-5 rounded-[14px] bg-[#3182F6] text-white font-bold text-[17px] shadow-sm active:scale-98 transition-transform flex items-center justify-center gap-2">
                                        <RefreshCw size={18} /> ì†”ë£¨ì…˜ ì ìš©í•˜ê¸° (ë‹¤ì‹œ ë¶„ì„)
                                    </button>
                                </div>
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        const LoadingItem = ({ step, current, icon, text }) => {
            const isDone = current > step;
            const isActive = current === step;
            return (
                <div className={`flex items-center gap-3 text-[14px] transition-all duration-300 ${isDone || isActive ? 'text-[#191F28] font-semibold' : 'text-[#aaa]'}`}>
                    <div className={`w-6 flex justify-center text-center transition-all duration-300`}>
                        {isDone ? <div className="text-[#3182F6]"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg></div> : <div className="opacity-50">{icon}</div>}
                    </div>
                    <span>{text}</span>
                </div>
            );
        };

        const TabButton = ({ children, active, onClick }) => (
            <button onClick={onClick} className={`px-3 py-2 rounded-[20px] text-[13px] font-semibold border transition-all ${active ? 'bg-[#191F28] text-white border-[#191F28]' : 'bg-white text-[#888] border-[#eee] hover:bg-gray-50'}`}>
                {children}
            </button>
        );

        const DiagItem = ({ label, value, status, color }) => (
            <div className="bg-[#F9FAFB] p-[10px] rounded-[10px] text-center">
                <div className="text-[11px] text-[#888] mb-1">{label}</div>
                <div className="text-[14px] font-bold text-[#191F28]">{value}</div>
                <div className="text-[10px] mt-[2px]" style={{ color: color }}>{status}</div>
            </div>
        );

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<LifePortSimulator />);
    </script>
</body>
</html>

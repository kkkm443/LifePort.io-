<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LifePort</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            --primary: #191F28;
            --secondary: #8B95A1;
            --blue: #3182F6;
            --red: #E94658;
            --orange: #FF8D4D;
            --green: #29CC6A;
            --bg: #F2F4F6;
            --white: #FFFFFF;
        }

        body {
            margin: 0; padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, "Apple SD Gothic Neo", "Pretendard", Roboto, "Noto Sans KR", sans-serif;
            background-color: var(--bg);
            display: flex; justify-content: center; align-items: center; min-height: 100vh; color: var(--primary);
            overscroll-behavior-y: none;
        }

        .app-container {
            width: 100%; max-width: 400px; height: 100vh; max-height: 850px;
            background-color: var(--white); position: relative; overflow-y: auto;
            box-shadow: 0 0 20px rgba(0,0,0,0.05);
            -webkit-overflow-scrolling: touch;
        }

        .padding-layout { padding: 24px; }

        /* --- SCREEN 1: INTRO --- */
        #screen-intro {
            height: 100%; display: flex; flex-direction: column; justify-content: center; text-align: center;
        }
        .intro-title { font-size: 28px; font-weight: 800; line-height: 1.4; margin-bottom: 10px; }
        .intro-desc { font-size: 16px; color: var(--secondary); margin-bottom: 40px; }
        .logo-area { font-size: 60px; margin-bottom: 30px; animation: bounce 2s infinite; }

        /* --- SCREEN 2: LOADING --- */
        #screen-loading {
            display: none; height: 100%; flex-direction: column; justify-content: center; align-items: center;
            background-color: rgba(255,255,255,0.95);
        }
        .loader {
            width: 50px; height: 50px; border: 5px solid #eee; border-top: 5px solid var(--blue);
            border-radius: 50%; animation: spin 1s linear infinite; margin-bottom: 30px;
        }
        .loading-text { font-size: 18px; font-weight: 700; margin-bottom: 10px; }
        .loading-sub { font-size: 14px; color: var(--secondary); }
        .connection-list { width: 80%; margin-top: 30px; text-align: left; }
        .connect-item { display: flex; align-items: center; margin-bottom: 12px; font-size: 14px; color: #aaa; transition: 0.3s; }
        .connect-item.active { color: var(--primary); font-weight: 600; }
        .connect-item i { margin-right: 10px; width: 20px; text-align: center; }
        .check-icon { color: var(--blue); opacity: 0; transform: scale(0.5); transition: 0.3s; }
        .connect-item.done .check-icon { opacity: 1; transform: scale(1); }

        /* --- SCREEN 3: RESULT --- */
        #screen-result { display: none; padding-bottom: 40px; }

        /* Sticky Header */
        .sticky-wrapper {
            position: sticky;
            top: 0;
            background-color: rgba(255, 255, 255, 0.98);
            z-index: 999;
            padding-top: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eee;
            box-shadow: 0 4px 10px rgba(0,0,0,0.03);
        }

        /* Result Header */
        .result-header { text-align: center; margin-bottom: 20px; padding: 0 24px;}
        .result-badge { 
            background: #FFF0F1; color: var(--red); padding: 6px 12px; border-radius: 20px; 
            font-size: 13px; font-weight: 700; display: inline-block; margin-bottom: 10px;
        }
        .death-msg { font-size: 26px; font-weight: 800; line-height: 1.3; }
        .highlight-red { color: var(--red); }
        .highlight-orange { color: var(--orange); }
        .highlight-green { color: var(--green); }

        /* Lifestyle Tabs (New Feature) */
        .lifestyle-tabs {
            display: flex; justify-content: center; gap: 8px; margin-bottom: 20px; padding: 0 24px;
        }
        .tab-btn {
            padding: 8px 12px; border-radius: 20px; font-size: 13px; font-weight: 600;
            border: 1px solid #eee; background: #fff; color: #888; cursor: pointer; transition: 0.2s;
        }
        .tab-btn.active { background: var(--primary); color: #fff; border-color: var(--primary); }

        /* Graph */
        .graph-box { margin-bottom: 5px; padding: 0 24px; }
        .graph-row { margin-bottom: 10px; }
        .graph-label { display: flex; justify-content: space-between; font-size: 14px; font-weight: 600; margin-bottom: 8px; color: #555; }
        .bar-bg { width: 100%; height: 16px; background: #eee; border-radius: 8px; overflow: hidden; position: relative; }
        .bar-fill { height: 100%; transition: width 0.3s ease-out; }
        .fill-life { width: 100%; background: #ddd; }
        .fill-money { width: 0%; background: var(--red); }

        /* Diagnosis Details (New Feature) */
        .diagnosis-grid {
            display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; padding: 0 24px; margin-top: 15px;
        }
        .diag-item { background: #F9FAFB; padding: 10px; border-radius: 10px; text-align: center; }
        .diag-label { font-size: 11px; color: #888; margin-bottom: 4px; }
        .diag-value { font-size: 14px; font-weight: 700; color: var(--primary); }
        .diag-status { font-size: 10px; margin-top: 2px; }

        /* Risk Section */
        .risk-section { border-top: 8px solid #F2F4F6; padding: 24px; margin-top: 20px; }
        .section-title { font-size: 18px; font-weight: 800; margin-bottom: 15px; display: flex; align-items: center; }
        .section-title i { color: var(--orange); margin-right: 8px; }
        
        .risk-card {
            background: white; border: 1px solid #eee; border-radius: 16px; padding: 20px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.03); margin-bottom: 15px;
        }
        .risk-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
        .risk-prob { font-size: 12px; color: var(--secondary); background: #f5f5f5; padding: 4px 8px; border-radius: 6px; display:inline-block; margin-bottom:10px;}
        .risk-name { font-size: 16px; font-weight: 700; }
        
        /* Toggle Switch */
        .switch { position: relative; display: inline-block; width: 44px; height: 24px; }
        .switch input { opacity: 0; width: 0; height: 0; }
        .slider-toggle { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #ccc; transition: .4s; border-radius: 34px; }
        .slider-toggle:before { position: absolute; content: ""; height: 18px; width: 18px; left: 3px; bottom: 3px; background-color: white; transition: .4s; border-radius: 50%; }
        input:checked + .slider-toggle { background-color: var(--orange); }
        input:checked + .slider-toggle:before { transform: translateX(20px); }

        /* Savings Solution Section */
        .solution-section { border-top: 8px solid #F2F4F6; padding: 24px; background: #F9FAFB; }
        .sim-card { background: white; border-radius: 16px; padding: 20px; border: 1px solid #eee; box-shadow: 0 4px 12px rgba(0,0,0,0.03); }
        .sim-title { font-size: 16px; font-weight: 700; margin-bottom: 5px; color: var(--blue); }
        
        .range-wrap { position: relative; padding: 15px 0; }
        
        input[type=range] { 
            width: 100%; 
            accent-color: var(--blue);
            cursor: pointer;
            touch-action: none;
            -webkit-appearance: none;
            background: transparent;
        }
        
        input[type=range]::-webkit-slider-runnable-track {
            width: 100%; height: 6px; background: #E5E8EB; border-radius: 3px;
        }

        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none;
            height: 28px; width: 28px;
            border-radius: 50%;
            background: var(--blue);
            margin-top: -11px;
            box-shadow: 0 2px 6px rgba(49, 130, 246, 0.4);
        }
        
        .save-display { display: flex; justify-content: space-between; align-items: center; margin-top: 10px; }
        .save-amount { font-size: 20px; font-weight: 800; color: var(--blue); }

        .btn-main {
            width: 100%; padding: 18px; border-radius: 14px; border: none;
            background-color: var(--blue); color: white; font-size: 17px; font-weight: 700;
            cursor: pointer; transition: 0.2s; margin-top: 20px;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        @keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }

    </style>
</head>
<body>

    <div class="app-container">
        
        <!-- 1. INTRO SCREEN -->
        <div id="screen-intro" class="padding-layout">
            <div class="logo-area">ğŸª™â³</div>
            <div class="intro-title">ë‹¹ì‹ ì˜ ëˆì€<br>ì–¸ì œ ì£½ì„ê¹Œìš”?</div>
            <p class="intro-desc">ì¹´ë“œ ë‚´ì—­ê³¼ ìœ„í—˜ í™•ë¥ ì„ ë¶„ì„í•´<br>ê¸ˆìœµ ìˆ˜ëª…ì„ ì˜ˆì¸¡í•´ ë“œë¦½ë‹ˆë‹¤.</p>
            <button class="btn-main" onclick="startProcess()">ë‚´ ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸°</button>
        </div>

        <!-- 2. LOADING SCREEN -->
        <div id="screen-loading">
            <div class="loader"></div>
            <div class="loading-text" id="load-msg">ì„œë²„ ì—°ê²° ì¤‘...</div>
            <div class="loading-sub">ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”</div>
            <div class="connection-list">
                <div class="connect-item" id="step1"><i class="fas fa-check-circle check-icon"></i> ğŸ¦ ì€í–‰/ê³„ì¢Œ ì”ì•¡ ì¡°íšŒ</div>
                <div class="connect-item" id="step2"><i class="fas fa-check-circle check-icon"></i> ğŸ’³ ì¹´ë“œ 3ë…„ì¹˜ ì†Œë¹„ íŒ¨í„´ ë¶„ì„</div>
                <div class="connect-item" id="step3"><i class="fas fa-check-circle check-icon"></i> ğŸ¥ ê±´ê°•ê²€ì§„ ì˜ë£Œë¹„ ì˜ˆì¸¡</div>
                <div class="connect-item" id="step4"><i class="fas fa-check-circle check-icon"></i> ğŸ“Š ë¦¬ìŠ¤í¬ ëª¨ë¸ë§ ì¤‘...</div>
            </div>
        </div>

        <!-- 3. RESULT SCREEN -->
        <div id="screen-result">
            
            <!-- Sticky Header -->
            <div class="sticky-wrapper">
                <div class="result-header">
                    <span class="result-badge" id="badge-text">í˜„ì¬ ìƒíƒœ</span>
                    <div class="death-msg">
                        ë‹¹ì‹ ì˜ ëˆì€<br>
                        <span class="highlight-red" id="age-display">78ì„¸</span>ì— ì‚¬ë§í•©ë‹ˆë‹¤.
                    </div>
                </div>

                <!-- Lifestyle Tabs (New) -->
                <div class="lifestyle-tabs">
                    <button class="tab-btn" onclick="setLifestyle('basic')" id="tab-basic">ê¸°ë³¸ ìƒí™œ</button>
                    <button class="tab-btn active" onclick="setLifestyle('standard')" id="tab-standard">ë³´í†µ ìƒí™œ</button>
                    <button class="tab-btn" onclick="setLifestyle('rich')" id="tab-rich">ì—¬ìœ  ìƒí™œ</button>
                </div>

                <!-- Graph -->
                <div class="graph-box">
                    <div class="graph-row">
                        <div class="graph-label"><span>ğŸ’¸ ëˆì˜ ìˆ˜ëª…</span><span id="bar-text">78ì„¸</span></div>
                        <div class="bar-bg">
                            <div class="bar-fill fill-money" id="money-bar" style="width: 78%;"></div>
                        </div>
                    </div>
                    <p style="text-align: center; color: #888; font-size: 12px; margin: 5px 0 0 0;">â–² ê¸°ëŒ€ìˆ˜ëª… 100ì„¸ ê¸°ì¤€</p>
                </div>

                <!-- Diagnosis Details (New) -->
                <div class="diagnosis-grid">
                    <div class="diag-item">
                        <div class="diag-label">ì €ì¶•ë¥ </div>
                        <div class="diag-value" style="color:var(--orange)">12%</div>
                        <div class="diag-status" style="color:var(--orange)">ë¶€ì¡±</div>
                    </div>
                    <div class="diag-item">
                        <div class="diag-label">DSR(ë¶€ì±„)</div>
                        <div class="diag-value" style="color:var(--green)">25%</div>
                        <div class="diag-status" style="color:var(--green)">ì–‘í˜¸</div>
                    </div>
                    <div class="diag-item">
                        <div class="diag-label">ë¹„ìƒê¸ˆ ì—¬ë ¥</div>
                        <div class="diag-value" style="color:var(--red)">0.8ê°œì›”</div>
                        <div class="diag-status" style="color:var(--red)">ìœ„í—˜</div>
                    </div>
                </div>
            </div>

            <!-- Scrollable Content -->
            <div class="risk-section">
                <div class="section-title">
                    <i class="fas fa-exclamation-triangle"></i>
                    <span>ë¼ì´í”„ ë¦¬ìŠ¤í¬ (ì¶©ê²© ì˜ˆì¸¡)</span>
                </div>
                <p style="font-size: 13px; color: #666; margin-bottom: 20px;">
                    "ë§Œì•½ ì´ëŸ° ì¼ì´ ìƒê¸´ë‹¤ë©´?"<br>ìŠ¤ìœ„ì¹˜ë¥¼ ì¼œì„œ ì¶©ê²©ì„ í™•ì¸í•˜ì„¸ìš”.
                </p>

                <div class="risk-card">
                    <div class="risk-prob">âš ï¸ ìœ„í—˜ë„ 24% ë†’ìŒ</div>
                    <div class="risk-header">
                        <span class="risk-name">ğŸ¥ ì¤‘ì¦ ì§ˆí™˜ ë°œìƒ</span>
                        <label class="switch">
                            <input type="checkbox" id="risk-medical" onchange="updateAll()">
                            <span class="slider-toggle"></span>
                        </label>
                    </div>
                    <div style="font-size:13px; color:#555;">ì˜ˆìƒ ì¹˜ë£Œë¹„ <b style="color:var(--red)">-6,000ë§Œì›</b></div>
                </div>

                <div class="risk-card">
                    <div class="risk-prob">âš¡ï¸ ë°œìƒ í™•ë¥  15%</div>
                    <div class="risk-header">
                        <span class="risk-name">ğŸ’¼ íœ´ì§ / ì‹¤ì§ ì‚¬ê³ </span>
                        <label class="switch">
                            <input type="checkbox" id="risk-job" onchange="updateAll()">
                            <span class="slider-toggle"></span>
                        </label>
                    </div>
                    <div style="font-size:13px; color:#555;">ì†Œë“ ì¤‘ë‹¨ ì†ì‹¤ <b style="color:var(--red)">-3,000ë§Œì›</b></div>
                </div>
            </div>

            <div class="solution-section">
                <div class="section-title">
                    <i class="fas fa-shield-alt" style="color:var(--blue)"></i>
                    <span style="color:var(--primary)">ì†”ë£¨ì…˜ ì‹œë®¬ë ˆì´í„°</span>
                </div>
                
                <div class="sim-card">
                    <div class="sim-title">â˜•ï¸ ì›” ì§€ì¶œì„ ì¤„ì¸ë‹¤ë©´?</div>
                    <div class="range-wrap">
                        <input type="range" id="saving-slider" min="0" max="100" value="0" step="1" oninput="updateAll()">
                    </div>
                    <div class="save-display">
                        <span style="font-size:14px; color:#555;">ì €ì¶•ì•¡</span>
                        <span class="save-amount" id="saving-text">-0ë§Œì›</span>
                    </div>
                </div>

                <div style="margin-top:20px; font-size:14px; text-align:center; color:#555;">
                    <span id="final-advice">ì§€ê¸ˆ ìƒíƒœëŠ” <strong>ì£¼ì˜</strong>ê°€ í•„ìš”í•©ë‹ˆë‹¤.</span>
                </div>

                <button class="btn-main" onclick="alert('ë§ì¶¤í˜• ì—°ê¸ˆ/ë³´í—˜ ìƒí’ˆ í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤.')">ì†”ë£¨ì…˜ ì ìš©í•˜ê¸°</button>
            </div>

        </div>

    </div>

    <script>
        let currentLifestyle = 'standard';
        let baseLife = 78;

        function startProcess() {
            document.getElementById('screen-intro').style.display = 'none';
            document.getElementById('screen-loading').style.display = 'flex';

            simulateConnectionStep(1, "ì€í–‰ ë°ì´í„° ê°€ì ¸ì˜¤ëŠ” ì¤‘...", 800);
            simulateConnectionStep(2, "ì¹´ë“œ ì†Œë¹„ë‚´ì—­ ë¶„ë¥˜ ì¤‘...", 1600);
            simulateConnectionStep(3, "ë¯¸ë˜ ì˜ë£Œë¹„ ê³„ì‚° ì¤‘...", 2400);
            simulateConnectionStep(4, "ë¦¬ìŠ¤í¬ ëª¨ë¸ë§ ì™„ë£Œ!", 3200);

            setTimeout(() => {
                document.getElementById('screen-loading').style.display = 'none';
                document.getElementById('screen-result').style.display = 'block';
                updateAll();
            }, 4000);
        }

        function simulateConnectionStep(stepNum, text, time) {
            setTimeout(() => {
                document.getElementById('load-msg').innerText = text;
                const item = document.getElementById('step' + stepNum);
                item.classList.add('active');
                item.classList.add('done');
            }, time);
        }

        // New Feature: Lifestyle Selection
        function setLifestyle(type) {
            currentLifestyle = type;
            
            // Reset active tabs
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            document.getElementById('tab-' + type).classList.add('active');

            // Change base life based on spending level
            if(type === 'basic') baseLife = 85; // Less spending -> Longer money life
            else if(type === 'standard') baseLife = 78;
            else if(type === 'rich') baseLife = 65; // High spending -> Shorter money life
            
            updateAll();
        }

        function updateAll() {
            const isMedicalRisk = document.getElementById('risk-medical').checked;
            const isJobRisk = document.getElementById('risk-job').checked;
            const savingAmount = parseInt(document.getElementById('saving-slider').value);

            document.getElementById('saving-text').innerText = "-" + savingAmount + "ë§Œì›";

            let finalLife = baseLife; // Use variable baseLife
            let riskPenalty = 0;
            if (isMedicalRisk) riskPenalty += 7;
            if (isJobRisk) riskPenalty += 3;
            
            finalLife -= riskPenalty;

            let savingBonus = Math.floor(savingAmount / 5);
            finalLife += savingBonus;

            if (finalLife > 100) finalLife = 100;

            const ageDisplay = document.getElementById('age-display');
            const barText = document.getElementById('bar-text');
            const moneyBar = document.getElementById('money-bar');
            const badge = document.getElementById('badge-text');
            const advice = document.getElementById('final-advice');

            ageDisplay.innerText = finalLife + "ì„¸";
            barText.innerText = finalLife + "ì„¸";
            moneyBar.style.width = finalLife + "%";

            if (finalLife >= 95) {
                badge.innerText = "ì•ˆì „ ìƒíƒœ";
                badge.style.background = "#E6FCF0";
                badge.style.color = "var(--green)";
                ageDisplay.className = "highlight-green";
                moneyBar.style.background = "var(--green)";
                advice.innerHTML = "í›Œë¥­í•©ë‹ˆë‹¤! <strong style='color:var(--green)'>ì•ˆì •ì ì¸ ë…¸í›„</strong>ê°€ ì˜ˆìƒë©ë‹ˆë‹¤.";
            } else if (riskPenalty > 0 && savingBonus < riskPenalty) {
                badge.innerText = "ìœ„í—˜ ê²½ê³ ";
                badge.style.background = "#FFF4E6";
                badge.style.color = "var(--orange)";
                ageDisplay.className = "highlight-orange";
                moneyBar.style.background = "var(--orange)";
                advice.innerHTML = "ë¦¬ìŠ¤í¬ê°€ í½ë‹ˆë‹¤. <strong style='color:var(--orange)'>ë” ë§ì€ ì €ì¶•</strong>ì´ë‚˜ ëŒ€ë¹„ê°€ í•„ìš”í•©ë‹ˆë‹¤.";
            } else {
                badge.innerText = "ì£¼ì˜ í•„ìš”";
                badge.style.background = "#FFF0F1";
                badge.style.color = "var(--red)";
                ageDisplay.className = "highlight-red";
                moneyBar.style.background = "var(--red)";
                advice.innerHTML = "í˜„ì¬ ì¶”ì„¸ë¼ë©´ <strong style='color:var(--red)'>ë…¸í›„ ìê¸ˆì´ ë¶€ì¡±</strong>í•©ë‹ˆë‹¤.";
            }
        }
    </script>
</body>
</html>
